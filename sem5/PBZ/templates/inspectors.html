{% extends "base.html" %}

{% block content %}
<h1>Управление сотрудниками ГАИ</h1>

<div class="form-section">
    <h2>Добавить нового сотрудника</h2>
    <form method="POST" action="{{ url_for('add_inspector') }}">
        <div class="form-group">
            <label>ФИО:</label>
            <input type="text" name="full_name" pattern="[А-Яа-яA-Za-z\s]{1,100}" required>
        </div>
        <div class="form-group">
            <label>Должность:</label>
            <input type="text" name="position" pattern="[А-Яа-яA-Za-z\s]{1,50}" required>
        </div>
        <div class="form-group">
            <label>Звание:</label>
            <input type="text" name="rank" pattern="[А-Яа-яA-Za-z\s]{1,50}" required>
        </div>
        <button type="submit">Добавить сотрудника</button>
    </form>
</div>

<h2>Список сотрудников</h2>
{% if inspectors %}
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>ФИО</th>
            <th>Должность</th>
            <th>Звание</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for inspector in inspectors %}
        <tr>
            <form method="POST" action="{{ url_for('edit_inspector') }}">
            <td>
                <input type="hidden" name="inspector_id" value="{{ inspector[0] }}">
                {{ inspector[0] }}
            </td>
            <td>
                <input type="text" name="full_name" value="{{ inspector[1] }}" pattern="[А-Яа-яA-Za-z\s]{1,100}" required>
            </td>
            <td>
                <input type="text" name="position" value="{{ inspector[2] }}" pattern="[А-Яа-яA-Za-z\s]{1,50}" required>
            </td>
            <td>
                <input type="text" name="rank" value="{{ inspector[3] }}" pattern="[А-Яа-яA-Za-z\s]{1,50}" required>
            </td>
            <td class="actions">
                <button type="submit">Обновить</button>
                <a href="{{ url_for('delete_inspector', inspector_id=inspector[0]) }}" 
                   onclick="return confirm('Удалить сотрудника {{ inspector[1] }}?')" 
                   class="btn-danger">Удалить</a>
            </td>
            </form>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>Сотрудники не найдены.</p>
{% endif %}
{% endblock %}